(()=>{var t={n:e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return t.d(o,{a:o}),o},d:(e,o)=>{for(var i in o)t.o(o,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:o[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{"use strict";t.r(e);const o=flarum.core.compat["forum/app"];var i=t.n(o);const n=flarum.core.compat["common/extend"],r=flarum.core.compat["common/components/TextEditor"];var s=t.n(r);const c=flarum.core.compat["common/components/Tooltip"];var a=t.n(c);const p=flarum.core.compat["common/components/Button"];var l=t.n(p),u=function(){$("#preview-snippet-title").slideToggle((function(){$("#preview-snippet-title").is(":visible")&&$("html, body").animate({scrollTop:$("#preview-discussion").offset().top},1e3)}))};function d(t,e){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},d(t,e)}const v=flarum.core.compat["common/Component"];var f=function(t){function e(){return t.apply(this,arguments)||this}var o,i;i=t,(o=e).prototype=Object.create(i.prototype),o.prototype.constructor=o,d(o,i);var n=e.prototype;return n.oninit=function(e){t.prototype.oninit.call(this,e),this.textEditor=this.attrs.textEditor,this.charCount=0},n.view=function(){return m("div",{className:"CharacterCounter"},m("button",{className:"Button"},m("span",{className:"Button-label"},this.charCount)))},n.updateCharCount=function(){console.log("wow"),this.charCount++,m.redraw()},e}(t.n(v)());i().initializers.add("dhtml-composer",(function(){(0,n.extend)(s().prototype,"oninit",(function(){var t=this;this.composer=i().composer,this.previewTimer=null,this.xterTimer=setInterval((function(){var t=$(".TextEditor-editorContainer .TextEditor-editor").html().length.toLocaleString("en-US");$(".CharacterCounter .Button-label").html(t)}),3e3),this.attrs.preview||($(".DiscussionList-discussions").append('\n    <li id="preview-discussion" role="article" aria-setsize="-1" aria-posinset="19">\n        <div class="DiscussionListItem DiscussionListItem--sticky">\n            <div class="DiscussionListItem-content Slidable-content read">\n                <a href="/d/69-what-programming-language-to-learn-in-2024/8" class="DiscussionListItem-main">\n                    <h2 class="DiscussionListItem-title" id="preview-snippet-title"></h2>\n                    <ul class="DiscussionListItem-info">\n                        <li class="item-excerptM" id="preview-snippet-body">\n                        </li>\n                    </ul>\n                </a>\n            </div>\n        </div>\n    </li>'),$("#preview-snippet-title").hide(),this.attrs.previewMode=!0,this.previewTimer=setInterval((function(){if($("#preview-snippet-title").is(":visible")){var e=t.composer.fields.title(),o=$(".TextEditor-editorContainer .TextEditor-editor").html();$("#preview-snippet-body").html(o),$("#preview-snippet-title").html(e)}}),3e3))})),(0,n.extend)(s().prototype,"controlItems",(function(t){this.attrs.preview||t.add("preview",m(a(),{text:i().translator.trans("core.forum.composer.preview_tooltip")},m(l(),{icon:"far fa-eye",className:"Button Button--icon",onclick:u})),-1)})),(0,n.extend)(s().prototype,"oncreate",(function(t,e){})),(0,n.extend)(s().prototype,"onremove",(function(t,e){this.attrs.preview||($("#preview-discussion").remove(),clearInterval(this.previewTimer)),clearInterval(this.xterTimer)})),(0,n.extend)(s().prototype,"oninit",(function(){console.log("Character count things")})),(0,n.extend)(s().prototype,"controlItems",(function(t){console.log("TextEditor Add Control Items Here"),t.add("xtercount",m(f,{textEditor:this}),100)})),(0,n.extend)(s().prototype,"oncreate",(function(t,e){})),(0,n.extend)(s().prototype,"onremove",(function(t,e){}))}))})(),module.exports=e})();
//# sourceMappingURL=forum.js.map